<!DOCTYPE html>

<html lang="ja">

<HEAD>
<title>CmdFreak</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="./style.css" type="text/css">
</HEAD>

<BODY>
<div id="container">
<H1>2. 内部処理</H1>

<H2 ID="2.1">2.1 REST API仕様</H2>
<div class="topic">
CmdFreakのREST APIは，以下の一覧に示すAPIをクライアント提供する。
<table class="tblstyle">
<tr><td>GET /api/system/</td><td>CmdFreakのサーバ情報(Build Time, Server Start Time, Number of Worker Thread)を取得する。</td></tr>
<tr><td>GET /api/logs/</td><td>イベントログを取得する。</td></tr>
<tr><td>POST /api/logs/</td><td>イベントログを追加する。</td></tr>
<tr><td>DELETE /api/logs/12/</td><td>イベントログを削除する。</td></tr>
</table>
</div><p>



<H2 ID="2.2">2.2 Get /api/system/</H2>
<div class="topic">
CmdFreakのサーバ情報(プログラム名称, バージョン, ビルド時刻, 起動時刻, 動作スレッド数)を取得する。
<ul>
<li>リクエスト
<p>なし</p>
</li>
<li>レスポンス
<pre>
{
  "Code":1234,
  "MsgEng":"abc",
  "MsgJpn":"あいう",
  "Data" : {
    "ProductName" : "CmdFreak",
    "Version" : "1.1.0",
    "BuildTime" : "May 21 2017 19:30:02",
    "StartTime" : "May 21 2017 19:30:02",
    "NumOfThreads" : 4
  }
}
</pre>
<table class="tblstyle">
<tr><td>Code</td><td>Integer</td><td>結果コード。0:成功</td></tr>
<tr><td>MsgEng</td><td>String</td><td>英文メッセージ。結果コードが0のときは空文字が返る。</td></tr>
<tr><td>MsgJpn</td><td>String</td><td>和文メッセージ。結果コードが0のときは空文字が返る。</td></tr>
<tr><td>ProductName</td><td>String</td><td>プログラム名称。"CmdFreak"</td></tr>
<tr><td>Version</td><td>String</td><td>バージョン番号。</td></tr>
<tr><td>BuildTime</td><td>String</td><td>プログラムをビルドした時間。</td></tr>
<tr><td>StartTime</td><td>String</td><td>サービスを起動した時間。</td></tr>
<tr><td>NumOfThreads</td><td>Integer</td><td>動作しているワーカースレッドの数。</td></tr>
</table>
</li>
</ul>
</div><p>


<H2 ID="2.3">2.3 Get /api/language/</H2>
<div class="topic">
クライアント（ブラウザ）の最優先の言語を取得する。<br/>
具体的には，クライアント・リクエストのHTTPヘッダのAccept-Languageに指定した言語のうち，先頭に指定した言語（2文字）を取得する。<br/>
Code要素が0ではないとき，Data要素は返されません。
<ul>
<li>リクエスト
<p>なし</p>
</li>
<li>レスポンス
<pre>
  "Code":1234,
  "MsgEng":"abc",
  "MsgJpn":"あいう",
  "Data" : {
    "ClientLanguage" : "ja",
  }
</pre>
<table class="tblstyle">
<tr><td>Code</td><td>Integer</td><td>結果コード。0:成功, 3120:クライアントのロケールを検知できなかったとき。</td></tr>
<tr><td>MsgEng</td><td>String</td><td>英文メッセージ。結果コードが0のときは空文字が返る。</td></tr>
<tr><td>MsgJpn</td><td>String</td><td>和文メッセージ。結果コードが0のときは空文字が返る。</td></tr>
<tr><td>ClientLanguage</td><td>String</td><td>クライアント（ブラウザ）の最優先の言語(2文字; 日本語="ja"，英語="en")。</td></tr>
</table>
</li>
</ul>
</div><p>



</div>
</BODY>

</html>

